<div class="p-4 md:p-8 my-3 rounded-lg w-full">
  <h3 class="text-base font-semibold text-blue-600 mb-4">Your Appointments</h3>
  @if(events && events.length > 0){
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
        @for(event of events; track event){
          <div class="bg-gray-50 p-4 md:p-6 rounded-lg shadow-md">
            <div class="flex flex-wrap justify-between items-center mb-2">
              <h4 class="text-lg font-semibold text-gray-900">{{ event.title | titlecase }}</h4>
              <h3 class="text-lg font-semibold"
                [ngClass]="{
                  'text-blue-400' : event.status === 'pending',
                  'text-orange-500': event.status === 'paid',
                  'text-green-500': event.status === 'confirmed',
                  'text-red-500': event.status === 'cancelled'
                }">{{ event.status | titlecase }}</h3>
            </div>
            <p class="text-sm text-gray-700"><strong>Date:</strong> {{ event.start | date: 'fullDate' }}</p>
            <p class="text-sm text-gray-700"><strong>Start Time:</strong> {{ event.start | date: 'shortTime' }}</p>
            <p class="text-sm text-gray-700"><strong>End Time:</strong> {{ event.end | date: 'shortTime' }}</p>
            @if(event.extendedProps?.email){
              <p class="text-sm text-gray-700"><strong>Guest Email:</strong> {{ event.extendedProps.email }}</p>
            }
            @if(userRole === 'user'){
              <div class="mt-4 flex flex-wrap justify-between space-y-2 md:space-y-0">
                <button (click)="editEvent(event)" class="w-full sm:w-20 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-400 text-center">
                  Edit
                </button>
                <button (click)="confirmDelete(event)" class="w-full sm:w-20 px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-400 text-center mt-2 sm:mt-0">
                  Delete
                </button>
              </div>
            }
          </div>
        }
      </div>
  }
  @else {
      <p class="text-gray-700">No appointments found. Please create a new event from the calendar page.</p>
  }
</div>

<!-- Delete Confirmation Modal -->
 @if(showDeleteModal){
  <div  class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4">
    <div class="bg-white p-6 rounded-lg w-full max-w-sm">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">Confirm Deletion</h2>
      <p class="text-gray-700 mb-6">Are you sure you want to delete the event "{{ selectedEvent?.title }}"?</p>
      <div class="flex justify-end space-x-2">
        <button (click)="closeDeleteModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-200">
          Cancel
        </button>
        <button (click)="deleteEvent()" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-400">
          Delete
        </button>
      </div>
    </div>
  </div>
 }

<!-- Edit Event Modal -->
 @if(showEditModal){
  <div class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4 overflow-auto">
    <div class="bg-white p-6 rounded-lg w-full max-w-md">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">Edit Event</h2>
      <form (ngSubmit)="saveEditedEvent()">
        <div class="mb-4">
          <label class="block text-gray-700">Title</label>
          <input type="text" [(ngModel)]="selectedEvent.title" name="title" class="w-full p-2 border rounded" required />
        </div>
        <div class="mb-4">
          <label class="block text-gray-700">Date</label>
          <input type="date" [(ngModel)]="selectedEvent.startDate" name="startDate" class="w-full p-2 border rounded" required />
        </div>
        <div class="mb-4">
          <label class="block text-gray-700">Start Time</label>
          <input type="time" [(ngModel)]="selectedEvent.startTime" name="startTime" class="w-full p-2 border rounded" required />
        </div>
        <div class="mb-4">
          <label class="block text-gray-700">End Time</label>
          <input type="time" [(ngModel)]="selectedEvent.endTime" name="endTime" class="w-full p-2 border rounded" required />
        </div>
        <div class="mb-4">
          <label class="block text-gray-700">Guest Email</label>
          <input type="email" [(ngModel)]="selectedEvent.extendedProps.email" name="email" class="w-full p-2 border rounded" />
        </div>
        <div class="flex justify-end space-x-2">
          <button type="button" (click)="closeEditModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-200">
            Cancel
          </button>
          <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-400">
            Save
          </button>
        </div>
      </form>
    </div>
  </div>
 }

